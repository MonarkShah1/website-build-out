---
interface Props {
  lat: number;
  lng: number;
  title: string;
  address: string;
}

const { lat, lng, title, address } = Astro.props;

// In production, integrate with Google Maps or OpenStreetMap
const mapUrl = `https://www.google.com/maps?q=${lat},${lng}`;
---

<div class="map-container">
  <div class="map-placeholder">
    <div class="map-info">
      <h3>{title}</h3>
      <p>{address}</p>
      <a href={mapUrl} target="_blank" rel="noopener" class="btn btn-primary">
        Get Directions
      </a>
    </div>
  </div>
  <iframe
    src={`https://www.openstreetmap.org/export/embed.html?bbox=${lng-0.01}%2C${lat-0.01}%2C${lng+0.01}%2C${lat+0.01}&layer=mapnik&marker=${lat}%2C${lng}`}
    width="100%"
    height="400"
    frameborder="0"
    loading="lazy"
    title={`Map showing location of ${title}`}
  ></iframe>
</div>

<style>
  .map-container {
    position: relative;
    width: 100%;
    height: 400px;
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  .map-placeholder {
    position: absolute;
    inset: 0;
    background: var(--color-gray-100);
    display: none;
  }
  
  .map-info {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
  }
  
  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
  
  @media (max-width: 640px) {
    .map-container {
      height: 300px;
    }
  }
</style>